<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <!-- Impedisce lo zoom su mobile -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Pacchetto Wellness - Trilussa Palace Hotel</title>
  <meta
    name="description"
    content="Richiedi un preventivo personalizzato per il tuo pacchetto wellness presso il Trilussa Palace Hotel. Scegli tra diverse opzioni Spa e Extra per un'esperienza di relax unica."
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
    rel="stylesheet"
  />
  <style>
    /* Definizione della palette di colori */
    :root {
      --primary-color: #6D4C41; /* Marrone scuro */
      --secondary-color: #8D6E63; /* Marrone chiaro */
      --accent-color: #FFA726; /* Arancione */
      --background-color: #f2efed; /* Aggiornato */
      --text-color: #333333; /* Grigio scuro */
      --price-bar-color: #8D6E63; /* Marrone chiaro */
      --button-color: #6D4C41; /* Marrone scuro */
      --button-hover-color: #8D6E63; /* Marrone chiaro */
      --input-border-color: #cccccc;
      --option-hover-bg: #e0e0e0;
      --modal-bg: rgba(0, 0, 0, 0.5);
      --spinner-color: #6D4C41;
    }

    /* Impostazioni base */
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      font-family: 'Roboto', sans-serif;
      background: var(--background-color);
      overflow: hidden; /* Previene lo scorrimento complessivo */
    }

    /* Barra fissa con il totale */
    .price-bar {
      position: fixed; /* Fissa la barra in alto */
      top: 0;
      left: 0;
      width: 100%;
      background-color: var(--price-bar-color);
      color: white;
      padding: 12px 16px; /* Ridotto per mobile */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      font-size: 1.4rem; /* Ridotto per mobile */
      z-index: 1000;
      font-weight: 700;
      text-align: center;
    }

    /* Contenitore principale */
    .container {
      margin: 60px auto 20px auto; /* Ridotto per mobile */
      width: 95%;
      max-width: 600px;
      padding: 10px; /* Ridotto per mobile */
      box-sizing: border-box;
      background: var(--background-color);
      display: flex;
      flex-direction: column;
      align-items: stretch; /* Allinea gli elementi per estensione */
      height: calc(100vh - 80px); /* Adatta l'altezza per riempire lo schermo meno la price-bar */
      overflow: hidden; /* Previene lo scorrimento interno */
    }

    .container h1 {
      color: var(--primary-color);
      font-size: 1.6rem; /* Ridotto per mobile */
      margin-top: 0;
      margin-bottom: 10px; /* Ridotto per mobile */
      font-weight: 700;
      text-align: center;
    }

    .container p {
      color: var(--text-color);
      font-size: 1rem; /* Ridotto per mobile */
      margin-bottom: 15px; /* Ridotto per mobile */
      text-align: center;
      word-wrap: break-word;
    }

    /* Sistemiamo i passaggi/step */
    .step {
      width: 100%;
      background: white;
      padding: 15px; /* Ridotto per mobile */
      border-radius: 12px; /* Ridotto per mobile */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      margin-bottom: 15px; /* Ridotto per mobile */
      display: none; /* Nascondi tutti gli step inizialmente */
      flex-direction: column;
      overflow-y: auto; /* Permette lo scorrimento interno se necessario */
      transition: opacity 0.3s ease, transform 0.3s ease;
      opacity: 0;
      transform: translateX(100%);
    }
    .step.active {
      display: flex;
      opacity: 1;
      transform: translateX(0);
      z-index: 1;
    }

    .step-header {
      margin-bottom: 10px; /* Ridotto per mobile */
    }
    .step-header h2 {
      font-size: 1.1rem; /* Ridotto per mobile */
      color: var(--primary-color);
      margin: 0 0 10px 0; /* Ridotto per mobile */
      font-weight: 700;
      text-align: center;
    }

    /* Opzioni */
    .options, .extras {
      display: flex;
      flex-direction: column;
      gap: 10px; /* Ridotto per mobile */
      flex: 1; /* Permette di riempire lo spazio disponibile */
    }

    .option {
      display: flex;
      align-items: center;
      padding: 10px; /* Ridotto per mobile */
      border: 1px solid var(--input-border-color);
      border-radius: 10px; /* Ridotto per mobile */
      background: white;
      transition: background 0.3s ease, transform 0.3s ease;
      font-size: 0.9rem; /* Ridotto per mobile */
      cursor: pointer;
    }
    .option:hover {
      background: var(--option-hover-bg);
      transform: translateY(-2px); /* Ridotto per mobile */
    }
    .option label {
      display: flex;
      align-items: center;
      flex: 1;
      font-size: 0.9rem; /* Ridotto per mobile */
      color: var(--text-color);
      cursor: pointer;
      word-wrap: break-word;
    }
    .option input {
      transform: scale(1.2); /* Ridotto per mobile */
      margin-right: 10px; /* Ridotto per mobile */
      cursor: pointer;
    }

    /* Immagini delle Spa in Cerchio */
    .spa-image-small {
      width: 25px; /* Ridotto per mobile */
      height: 25px; /* Ridotto per mobile */
      border-radius: 50%;
      object-fit: cover;
      margin-right: 8px; /* Ridotto per mobile */
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    /* Pulsanti navigazione */
    .navigation-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 15px; /* Ridotto per mobile */
      width: 100%;
    }
    .navigation-buttons button {
      background-color: var(--button-color);
      color: white;
      padding: 8px 16px; /* Ridotto per mobile */
      font-size: 0.8rem; /* Ridotto per mobile */
      border: none;
      border-radius: 20px; /* Ridotto per mobile */
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
      flex: 1; /* Permette ai pulsanti di espandersi uniformemente */
      margin: 0 5px; /* Aggiunto spazio tra i pulsanti */
    }
    .navigation-buttons button:first-child {
      margin-left: 0;
    }
    .navigation-buttons button:last-child {
      margin-right: 0;
    }
    .navigation-buttons button:hover {
      background-color: var(--button-hover-color);
      transform: scale(1.02); /* Ridotto per mobile */
    }

    /* Piccola animazione di fadeIn */
    @keyframes fadeIn {
      from { opacity: 0; }
      to   { opacity: 1; }
    }

    /* Responsive Design */
    @media (max-width: 600px) {
      .price-bar {
        font-size: 1.4rem;
        padding: 12px 16px; /* Ridotto */
      }
      .container {
        padding: 10px;
        margin: 60px auto 20px auto; /* Ridotto per adattarsi meglio */
        height: calc(100vh - 80px); /* Adattato per riempire lo schermo meno la price-bar */
      }
      .container h1 {
        font-size: 1.6rem; /* Ridotto */
      }
      .container p {
        font-size: 1rem; /* Ridotto */
      }
      .step-header h2 {
        font-size: 1.1rem; /* Ridotto */
      }
      .navigation-buttons button {
        padding: 8px 16px; /* Ridotto */
        font-size: 0.8rem; /* Ridotto */
      }
      .step {
        padding: 10px; /* Ridotto */
        border-radius: 10px; /* Ridotto */
        margin-bottom: 10px; /* Ridotto */
      }
      .options, .extras {
        gap: 8px; /* Ridotto */
      }
      .option {
        padding: 8px; /* Ridotto */
        border-radius: 8px; /* Ridotto */
        font-size: 0.8rem; /* Ridotto */
      }
      .option input {
        transform: scale(1); /* Ripristinato */
        margin-right: 8px; /* Ridotto */
      }
      .spa-image-small {
        width: 20px; /* Ulteriore riduzione */
        height: 20px; /* Ulteriore riduzione */
        margin-right: 6px; /* Ulteriore riduzione */
      }
      .loading-overlay .spinner {
        width: 40px; /* Ridotto */
        height: 40px; /* Ridotto */
        border-width: 6px; /* Ridotto */
      }
      .modal-content {
        margin: 20% auto; /* Ridotto */
        padding: 15px; /* Ridotto */
        width: 90%; /* Aumentato per adattarsi meglio */
        max-width: 300px; /* Ridotto */
      }
    }

    /* Stili per il logo */
    .logo-container {
      margin-top: 20px; /* Ridotto */
      text-align: center;
    }

    .logo {
      max-width: 120px; /* Ridotto */
      height: auto;
    }

    /* Prevenzione dello zoom quando si interagisce con gli input */
    input, textarea, select, button {
      font-size: 16px;
    }

    /* Stili per il popup */
    .modal {
      display: none; /* Hidden by default */
      position: fixed;
      z-index: 5000; /* Above loading overlay */
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: hidden; /* Disable scroll */
      background-color: var(--modal-bg); /* Black w/ opacity */
    }

    .modal-content {
      background-color: #fefefe;
      margin: 20% auto; /* Ridotto */
      padding: 15px; /* Ridotto */
      border: 1px solid #888;
      width: 90%;
      max-width: 300px; /* Ridotto */
      border-radius: 10px; /* Ridotto */
      text-align: center;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      position: relative;
    }

    .close-modal {
      color: #aaa;
      position: absolute;
      top: 8px; /* Ridotto */
      right: 12px; /* Ridotto */
      font-size: 1.2rem; /* Ridotto */
      font-weight: bold;
      cursor: pointer;
    }

    .close-modal:hover,
    .close-modal:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }

    /* Stili per le immagini delle spa */
    .spa-image-container {
      margin-top: 15px; /* Ridotto */
      text-align: center;
    }

    .spa-image {
      max-width: 100%;
      height: auto;
      border-radius: 8px; /* Ridotto */
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      display: none; /* Initially hidden */
      margin-top: 10px; /* Ridotto */
    }

    /* Stili per l'overlay di caricamento */
    .loading-overlay {
      display: none; /* Hidden by default */
      position: fixed; /* Fisso alla viewport */
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(255,255,255,0.8);
      display: flex; /* Mostrato quando necessario */
      justify-content: center;
      align-items: center;
      border-radius: 10px; /* Ridotto */
      z-index: 4000; /* Above the step content */
    }

    .spinner {
      border: 6px solid #f3f3f3; /* Light grey */
      border-top: 6px solid var(--spinner-color); /* Marrone scuro */
      border-radius: 50%;
      width: 40px; /* Ridotto */
      height: 40px; /* Ridotto */
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

  </style>
</head>

<body>
  <!-- Barra con il totale -->
  <div class="price-bar">
    Totale: <span id="totalPrice">0</span>€
  </div>

  <div class="container">
    <div>
      <h1>Pacchetto Wellness</h1>
      <p>Scegli le opzioni per il tuo relax presso il Trilussa Palace Hotel:</p>

      <form
        id="wellnessForm"
        action="https://script.google.com/macros/s/AKfycbxytaalqXiGvZr2ZneImOD1Os6llLJ-K4hssNHpVw4X_p15xD_rf7bogK2o5GVQcpYYkg/exec" 
        method="POST"
        target="hiddenFrame"
      >
        <!-- STEP 1: Scegli la Spa -->
        <div class="step active" id="step-1">
          <div class="step-header">
            <h2>1. Scegli la Spa</h2>
          </div>
          <div class="options">
            <div class="option">
              <img src="https://www.trilussapalacehotel.it/data/2560/Hotel-Trilussa-Palace-spa-maya-5456-HDR.jpg" alt="SPA MAYA" class="spa-image-small" />
              <label for="spa-maya">
                <input
                  type="radio"
                  id="spa-maya"
                  name="spa"
                  class="option-radio"
                  data-price="0"
                  value="SPA MAYA"
                  required
                />
                SPA MAYA
              </label>
            </div>
            <div class="option">
              <img src="https://www.trilussapalacehotel.it/data/2560/Hotel-Trilussa-Palace-spa-moon-3559.jpg" alt="SPA MOON" class="spa-image-small" />
              <label for="spa-moon">
                <input
                  type="radio"
                  id="spa-moon"
                  name="spa"
                  class="option-radio"
                  data-price="0"
                  value="SPA MOON"
                  required
                />
                SPA MOON
              </label>
            </div>
            <div class="option">
              <img src="https://www.trilussapalacehotel.it/data/2560/Hotel-Trilussa-Palace-spa-domus-63.jpg" alt="SPA DOMUS" class="spa-image-small" />
              <label for="spa-domus">
                <input
                  type="radio"
                  id="spa-domus"
                  name="spa"
                  class="option-radio"
                  data-price="0"
                  value="SPA DOMUS"
                  required
                />
                SPA DOMUS
              </label>
            </div>
          </div>
          <!-- Pulsanti di navigazione -->
          <div class="navigation-buttons">
            <div></div> <!-- Spazio vuoto per allineamento -->
            <button type="button" onclick="showNextStep(1)">Avanti</button>
          </div>
        </div>

        <!-- STEP 2: Scegli la Fascia Oraria -->
        <div class="step" id="step-2">
          <div class="step-header">
            <h2>2. Scegli la Fascia Oraria</h2>
          </div>
          <div class="options">
            <div class="option">
              <label for="time-mattina">
                <input
                  type="radio"
                  id="time-mattina"
                  name="time"
                  class="option-radio"
                  data-price="0"
                  value="MATTINA (08:00-16:00)"
                  required
                />
                MATTINA (08:00-16:00)
              </label>
            </div>
            <div class="option">
              <label for="time-pomeriggio">
                <input
                  type="radio"
                  id="time-pomeriggio"
                  name="time"
                  class="option-radio"
                  data-price="0"
                  value="POMERIGGIO (16:00-23:00)"
                  required
                />
                POMERIGGIO (16:00-23:00)
              </label>
            </div>
            <div class="option">
              <label for="time-notte">
                <input
                  type="radio"
                  id="time-notte"
                  name="time"
                  class="option-radio"
                  data-price="0"
                  value="NOTTE (23:00-08:00)"
                  required
                />
                NOTTE (23:00-08:00)
              </label>
            </div>
          </div>
          <div class="navigation-buttons">
            <button type="button" onclick="showPreviousStep(2)">Indietro</button>
            <button type="button" onclick="showNextStep(2)">Avanti</button>
          </div>
        </div>

        <!-- STEP 3: Scegli la Durata e Numero di Persone -->
        <div class="step" id="step-3">
          <div class="step-header">
            <h2>3. Scegli la Durata e il Numero di Persone</h2>
          </div>
          <div class="options">
            <div class="option">
              <label for="duration-1h">
                <input
                  type="radio"
                  id="duration-1h"
                  name="duration"
                  class="option-radio"
                  data-price="0"
                  value="1h"
                  required
                />
                1 Ora
              </label>
            </div>
            <div class="option">
              <label for="duration-1.30h">
                <input
                  type="radio"
                  id="duration-1.30h"
                  name="duration"
                  class="option-radio"
                  data-price="0"
                  value="1.30h"
                  required
                />
                1.30 Ore
              </label>
            </div>
          </div>
          <!-- Numero di Persone -->
          <div style="margin-top: 10px;">
            <label for="persons" style="font-weight: bold; font-size: 0.9rem;">Ospiti (Ospite aggiunto +30€):</label>
            <input
              type="number"
              name="persons"
              id="persons"
              value="2"
              min="2"
              style="width: 100%; padding: 8px; margin-top: 5px; border-radius: 5px; border: 1px solid var(--input-border-color); font-size: 0.9rem;"
            />
          </div>
          <div class="navigation-buttons">
            <button type="button" onclick="showPreviousStep(3)">Indietro</button>
            <button type="button" onclick="showNextStep(3)">Avanti</button>
          </div>
        </div>

        <!-- STEP 4: Scegli gli Extra -->
        <div class="step" id="step-4">
          <div class="step-header">
            <h2>4. Scegli gli Extra</h2>
          </div>
          <div class="extras">
            <div class="option">
              <label for="extra-cena">
                <input
                  type="checkbox"
                  id="extra-cena"
                  class="option-checkbox"
                  data-price="90"
                  name="extras"
                  value="Cena RAMO Bistrot"
                />
                Cena RAMO Bistrot - €90
              </label>
            </div>
            <div class="option">
              <label for="extra-sushi">
                <input
                  type="checkbox"
                  id="extra-sushi"
                  class="option-checkbox"
                  data-price="35"
                  name="extras"
                  value="Sushi Misto"
                />
                Sushi Misto - €35
              </label>
            </div>
            <div class="option">
              <label for="extra-pinsa">
                <input
                  type="checkbox"
                  id="extra-pinsa"
                  class="option-checkbox"
                  data-price="20"
                  name="extras"
                  value="Pinsa"
                />
                Pinsa - €20
              </label>
            </div>
            <div class="option">
              <label for="extra-prosecco">
                <input
                  type="checkbox"
                  id="extra-prosecco"
                  class="option-checkbox"
                  data-price="40"
                  name="extras"
                  value="Bottiglia di Prosecco"
                />
                Bottiglia di Prosecco - €40
              </label>
            </div>
          </div>
          <div class="navigation-buttons">
            <button type="button" onclick="showPreviousStep(4)">Indietro</button>
            <button type="button" onclick="showNextStep(4)">Avanti</button>
          </div>
        </div>

        <!-- STEP 5: Conferma e invio -->
        <div class="step" id="step-5">
          <div class="step-header">
            <h2>5. Conferma e Richiesta Preventivo</h2>
          </div>
          <div class="section">
            <label for="email" style="font-weight:bold; font-size: 0.9rem;">Email *</label>
            <input
              type="email"
              name="email"
              id="email"
              placeholder="La tua Email"
              required
              style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid var(--input-border-color); margin-bottom: 10px; font-size: 0.9rem;"
            />

            <label for="phone" style="font-weight:bold; font-size: 0.9rem;">Telefono (opzionale)</label>
            <input
              type="tel"
              name="phone"
              id="phone"
              placeholder="Il tuo Telefono"
              style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid var(--input-border-color); margin-bottom: 10px; font-size: 0.9rem;"
            />

            <input type="hidden" name="total" id="total" />
          </div>
          <!-- Overlay di caricamento posizionato all'interno del step-5 -->
          <div id="loadingOverlay" class="loading-overlay">
            <div class="spinner"></div>
          </div>
          <div class="navigation-buttons">
            <button type="button" onclick="showPreviousStep(5)">Indietro</button>
            <button type="submit" onclick="showLoading()">Richiedi Conferma</button>
          </div>
        </div>
      </form>

      <!-- Logo -->
      <div class="logo-container">
        <img src="https://www.trilussasparoma.com/data/png/logo_global.png" alt="Trilussa Palace Hotel Logo" class="logo" />
      </div>

      <!-- Iframe nascosto per l'invio del form con onload -->
      <iframe name="hiddenFrame" style="display:none;" onload="onFormLoad()"></iframe>

      <!-- Popup di conferma -->
      <div id="confirmationModal" class="modal">
        <div class="modal-content">
          <span class="close-modal" onclick="closeModal()">&times;</span>
          <h2>Richiesta Inviata!</h2>
          <p>Grazie! La tua richiesta è stata inviata con successo.</p>
          <button onclick="closeModal()">Chiudi</button>
        </div>
      </div>

    </div>

    <script>
      let currentStep = 1;
      const totalSteps = 5;

      function showStep(step) {
        for (let i = 1; i <= totalSteps; i++) {
          const stepElement = document.getElementById(`step-${i}`);
          if (i === step) {
            stepElement.classList.add("active");
          } else {
            stepElement.classList.remove("active");
          }
        }
      }

      function showNextStep(step) {
        if (!validateStep(step)) return;
        if (step < totalSteps) {
          currentStep = step + 1;
          showStep(currentStep);
          updateTotal();
        }
      }

      function showPreviousStep(step) {
        if (step > 1) {
          currentStep = step - 1;
          showStep(currentStep);
        }
      }

      // Convalida radio obbligatori negli step 1,2,3
      function validateStep(step) {
        let valid = true;
        const stepElement = document.getElementById(`step-${step}`);

        if (step === 1 || step === 2 || step === 3) {
          const required = stepElement.querySelectorAll('input[type="radio"]:checked');
          if (required.length === 0) {
            alert("Per favore, completa tutte le scelte obbligatorie.");
            valid = false;
          }
        }
        return valid;
      }

      // Calcolo totale
      function updateTotal() {
        let totalPrice = 0;

        const spaSelected = document.querySelector('input[name="spa"]:checked');
        const timeSelected = document.querySelector('input[name="time"]:checked');
        const durationSelected = document.querySelector('input[name="duration"]:checked');
        const personsInput = document.getElementById("persons");
        let persons = 2;
        if (personsInput) {
          persons = parseInt(personsInput.value) || 2;
        }

        if (spaSelected && timeSelected && durationSelected) {
          const spaPrices = {
            "SPA MAYA": {
              "MATTINA (08:00-16:00)": { "1h": 110, "1.30h": 160 },
              "POMERIGGIO (16:00-23:00)": { "1h": 170, "1.30h": 360 },
              "NOTTE (23:00-08:00)": { "1h": 250, "1.30h": 360 },
            },
            "SPA MOON": {
              "MATTINA (08:00-16:00)": { "1h": 90, "1.30h": 130 },
              "POMERIGGIO (16:00-23:00)": { "1h": 140, "1.30h": 290 },
              "NOTTE (23:00-08:00)": { "1h": 200, "1.30h": 290 },
            },
            "SPA DOMUS": {
              "MATTINA (08:00-16:00)": { "1h": 75, "1.30h": 110 },
              "POMERIGGIO (16:00-23:00)": { "1h": 110, "1.30h": 220 },
              "NOTTE (23:00-08:00)": { "1h": 160, "1.30h": 220 },
            },
          };

          const spaPrice = spaPrices[spaSelected.value][timeSelected.value][durationSelected.value];
          totalPrice += spaPrice;
        }

        if (persons > 2) {
          totalPrice += (persons - 2) * 30;
        }

        const checkboxes = document.querySelectorAll(".option-checkbox:checked");
        checkboxes.forEach((checkbox) => {
          totalPrice += parseFloat(checkbox.dataset.price);
        });

        document.getElementById("totalPrice").textContent = totalPrice.toFixed(2);
        document.getElementById("total").value = totalPrice.toFixed(2);
      }

      const radioButtons = document.querySelectorAll(".option-radio");
      const checkboxes = document.querySelectorAll(".option-checkbox");
      const personsInput = document.getElementById("persons");

      radioButtons.forEach((radio) => {
        radio.addEventListener("change", () => {
          updateTotal();
          updateSpaImage();
        });
      });
      checkboxes.forEach((checkbox) => {
        checkbox.addEventListener("change", updateTotal);
      });
      if (personsInput) {
        personsInput.addEventListener("change", updateTotal);
      }

      // Funzione per aggiornare l'immagine della spa selezionata
      function updateSpaImage() {
        const spaSelected = document.querySelector('input[name="spa"]:checked');
        const spaImages = document.querySelectorAll('.spa-image');

        spaImages.forEach((img) => {
          img.style.display = 'none';
        });

        if (spaSelected) {
          const spaValue = spaSelected.value.toLowerCase().replace(/\s/g, '-');
          const selectedImage = document.getElementById(`spa-image-spa-${spaValue}`);
          if (selectedImage) {
            selectedImage.style.display = 'block';
          }
        }
      }

      // Popup di conferma al termine dell'invio
      function onFormLoad() {
        // Nascondi l'overlay e mostra il popup
        hideLoading();
        openModal();
      }

      // Funzioni per aprire e chiudere il popup
      function openModal() {
        document.getElementById("confirmationModal").style.display = "block";
      }

      function closeModal() {
        document.getElementById("confirmationModal").style.display = "none";
      }

      // Chiudi il modal se l'utente clicca fuori dal contenuto
      window.onclick = function(event) {
        const modal = document.getElementById("confirmationModal");
        if (event.target == modal) {
          modal.style.display = "none";
        }
      }

      // Funzioni per l'overlay di caricamento
      function showLoading() {
        document.getElementById("loadingOverlay").style.display = "flex";
      }

      function hideLoading() {
        document.getElementById("loadingOverlay").style.display = "none";
      }

      // Impedisce lo zoom quando si interagisce con gli input
      document.addEventListener('touchmove', function(event) {
        // Solo se non si sta interagendo con un input
        const activeElement = document.activeElement;
        if (activeElement.tagName !== 'INPUT' && activeElement.tagName !== 'TEXTAREA') {
          event.preventDefault();
        }
      }, { passive: false });
    </script>
</body>
</html>
